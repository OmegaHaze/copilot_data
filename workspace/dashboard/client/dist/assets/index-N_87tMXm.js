import{r as a,j as e,x as K,l as L,R as q,L as V,C as B,X as Y,Y as X,T as Q,a as J,A as Z,b as O,c as I,D as ee,d as te}from"./vendor-DxK7zR1b.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const t of l)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(l){const t={};return l.integrity&&(t.integrity=l.integrity),l.referrerPolicy&&(t.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?t.credentials="include":l.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(l){if(l.ep)return;l.ep=!0;const t=i(l);fetch(l.href,t)}})();const U=a.createContext();function se({children:s}){const[n,i]=a.useState(!1),[r,l]=a.useState(null),t=c=>{l(c),i(!0)},o=()=>{i(!1),l(null)};return e.jsx(U.Provider,{value:{visible:n,pane:r,open:t,close:o},children:s})}function R({name:s,status:n,logo:i,isUserPane:r}){const{open:l}=a.useContext(U);return e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs font-bold border-b border-green-700 bg-green-400/10 cursor-move",children:[e.jsxs("div",{className:"flex items-center space-x-2 pointer-events-none",children:[i&&e.jsx("img",{src:i,alt:s,className:"h-5 w-5"}),e.jsx("span",{className:"text-green-200 tracking-wide",children:s.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center space-x-2 pointer-events-auto",children:[r&&e.jsx("button",{onMouseDown:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),confirm("Delete this pane?")&&fetch(`/api/panes/${s.toLowerCase()}`,{method:"DELETE"}).then(()=>window.dispatchEvent(new Event("paneRefresh")))},className:"text-red-500 hover:text-red-300 text-xs font-bold mr-2",children:"✖ Delete"}),e.jsx("span",{className:`${n==="RUNNING"?"text-green-400":"text-red-400"}`,children:n}),e.jsx("button",{onMouseDown:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),l(s.toLowerCase())},className:"text-green-400 hover:text-green-200 cursor-pointer",children:"⚙"})]})]})}function z(){const s=a.useRef(null),n=a.useRef(null);return a.useEffect(()=>{const i=new K.Terminal({cols:80,rows:24,theme:{background:"#000000",foreground:"#00ff00"}});i.open(s.current);const r=L("/pty");return n.current=r,r.on("output",l=>i.write(l)),i.onData(l=>r.emit("input",l)),i.onResize(({cols:l,rows:t})=>{r.emit("resize",{cols:l,rows:t})}),()=>{r.disconnect(),i.dispose()}},[]),e.jsx("div",{className:"h-full w-full bg-black border border-green-600 rounded shadow-inner",children:e.jsx("div",{ref:s,className:"w-full h-full"})})}function C({name:s}){return s==="terminal"?e.jsx(z,{}):e.jsx("div",{className:"px-3 py-2 text-xs opacity-60 tracking-widest"})}function ne({name:s,status:n,logo:i}){const[r,l]=a.useState(""),t=a.useRef(null);return a.useEffect(()=>{const o=L();return o.on("supervisorLogStream",c=>{l(d=>d+c)}),()=>o.disconnect()},[]),a.useEffect(()=>{const o=t.current;o&&(o.scrollTop=o.scrollHeight)},[r]),e.jsxs("div",{className:"bg-black rounded border border-green-600 shadow-inner overflow-hidden w-full h-full flex flex-col",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s}),e.jsx("div",{ref:t,className:"flex-grow overflow-y-auto mt-1 text-green-200 bg-black border-t border-green-700 p-2 scroll-panel text-[10px] leading-tight font-mono whitespace-pre-wrap shadow-inner",children:r.length>0?e.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):"░░░ Awaiting output ░░░"})]})}function M({name:s,status:n,logo:i}){return e.jsxs("div",{className:"w-full h-full bg-black rounded border border-green-600 shadow-inner overflow-hidden",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s})]})}function re({name:s,status:n,logo:i}){return e.jsxs("div",{className:"w-full h-full bg-black rounded border border-green-600 shadow-inner overflow-hidden",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s})]})}function W({name:s,status:n,logo:i}){const[r,l]=a.useState(""),t=a.useRef(null);return a.useEffect(()=>{const o=L();return o.on("openwebuiLogStream",c=>{l(d=>d+c)}),()=>o.disconnect()},[]),a.useEffect(()=>{const o=t.current;o&&(o.scrollTop=o.scrollHeight)},[r]),e.jsxs("div",{className:"bg-black rounded border border-green-600 shadow-inner overflow-hidden w-full h-full flex flex-col",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s}),e.jsx("div",{ref:t,className:"flex-grow overflow-y-auto mt-1 text-green-200 bg-black border-t border-green-700 p-2 scroll-panel text-[10px] leading-tight font-mono whitespace-pre-wrap shadow-inner",children:r.length>0?e.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):"░░░ Awaiting output ░░░"})]})}function oe({name:s,status:n,logo:i}){const[r,l]=a.useState(""),t=a.useRef(null);return a.useEffect(()=>{const o=L();return o.on("ollamaLogStream",c=>{l(d=>d+c)}),()=>o.disconnect()},[]),a.useEffect(()=>{const o=t.current;o&&(o.scrollTop=o.scrollHeight)},[r]),e.jsxs("div",{className:"bg-black rounded border border-green-600 shadow-inner overflow-hidden w-full h-full flex flex-col",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s}),e.jsx("div",{ref:t,className:"flex-grow overflow-y-auto mt-1 text-green-200 bg-black border-t border-green-700 p-2 scroll-panel text-[10px] leading-tight font-mono whitespace-pre-wrap shadow-inner",children:r.length>0?e.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):"░░░ Awaiting output ░░░"})]})}function ae({name:s,status:n,logo:i}){const[r,l]=a.useState(""),t=a.useRef(null);return a.useEffect(()=>{const o=L();return o.on("comfyuiLogStream",c=>{l(d=>d+c)}),()=>o.disconnect()},[]),a.useEffect(()=>{const o=t.current;o&&(o.scrollTop=o.scrollHeight)},[r]),e.jsxs("div",{className:"bg-black rounded border border-green-600 shadow-inner overflow-hidden w-full h-full flex flex-col",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s}),e.jsx("div",{ref:t,className:"flex-grow overflow-y-auto mt-1 text-green-200 bg-black border-t border-green-700 p-2 scroll-panel text-[10px] leading-tight font-mono whitespace-pre-wrap shadow-inner",children:r.length>0?e.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):"░░░ Awaiting output ░░░"})]})}function le({name:s,status:n,logo:i}){return e.jsxs("div",{className:"w-full h-full bg-black rounded border border-green-600 shadow-inner overflow-hidden",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s})]})}function ie({name:s,status:n,logo:i}){return e.jsxs("div",{className:"w-full h-full bg-black rounded border border-green-600 shadow-inner overflow-hidden",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s})]})}function A({name:s,status:n,logo:i}){return e.jsxs("div",{className:"w-full h-full bg-black rounded border border-green-600 shadow-inner overflow-hidden",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s})]})}function ce({name:s="NVIDIA GPU",status:n="Active",logo:i}){const[r,l]=a.useState([]);return a.useEffect(()=>{const t=L();return t.on("nvidiaSmiStream",o=>{const[c,d,p]=o.trim().split(",").map(g=>parseInt(g)),x=new Date().toLocaleTimeString();l(g=>[...g,{time:x,temp:c,gpuUtil:d,memUtil:p}].slice(-30))}),()=>t.disconnect()},[]),e.jsxs("div",{className:"bg-[#08170D] rounded border border-green-600 shadow-inner overflow-hidden w-full h-full flex flex-col",children:[e.jsx(R,{name:s,status:n,logo:i}),e.jsx(C,{name:s}),e.jsx("div",{className:"flex-grow p-2 text-green-300 font-mono text-xs",children:e.jsx(q,{width:"100%",height:"100%",children:e.jsxs(V,{data:r,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tempFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#00FF00",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#00FF00",stopOpacity:0})]})}),e.jsx(B,{stroke:"#0f0",strokeDasharray:"2 2"}),e.jsx(Y,{dataKey:"time",stroke:"#0f0",tick:{fontSize:10}}),e.jsx(X,{stroke:"#0f0",tick:{fontSize:10}}),e.jsx(Q,{contentStyle:{backgroundColor:"#000",borderColor:"#0f0",color:"#0f0"}}),e.jsx(J,{wrapperStyle:{color:"#0f0",fontSize:10}}),e.jsx(Z,{type:"monotone",dataKey:"temp",stroke:"#00FF00",fill:"url(#tempFill)",name:"Temp (°C)",animationDuration:300,dot:!1}),e.jsx(O,{type:"monotone",dataKey:"gpuUtil",stroke:"#00FF00",strokeDasharray:"5 2",dot:!1,name:"GPU Util (%)",animationDuration:300}),e.jsx(O,{type:"monotone",dataKey:"memUtil",stroke:"#00FF00",strokeDasharray:"3 3",dot:!1,name:"VRAM Util (%)",animationDuration:300})]})})})]})}const de=I.WidthProvider(I.Responsive);function D(s,n){const i=[],r="supervisor";let o=0,c=5,d;return n>=24?d=Math.floor(n*.25):n>=12?d=Math.floor(n*.5):d=n,s.forEach(p=>{const x=p.name.toLowerCase(),g=x===r,m=g?n:x==="nvidia"?d*2:d,b=g?5:4,u=g?0:o,h=g?0:c;i.push({i:x,x:u,y:h,w:m,h:b,static:!1}),g||(o+=m,o+d>n&&(o=0,c+=4))}),i}function ue({services:s=[],paneMap:n={},logoUrls:i={},onLayoutChange:r}){const l={lg:1600,md:1200,sm:768,xs:480,xxs:0},t={lg:48,md:36,sm:24,xs:6,xxs:2},o={lg:D(s,t.lg),md:D(s,t.md),sm:D(s,t.sm),xs:D(s,t.xs),xxs:D(s,t.xxs)},c=(d,p)=>{r&&r(p)};return e.jsx("div",{className:"w-full max-w-screen-xl mx-auto relative",style:{minHeight:"100vh"},children:e.jsx(de,{className:"layout",layouts:o,breakpoints:l,cols:t,rowHeight:60,margin:[10,10],containerPadding:[10,10],onLayoutChange:c,compactType:null,preventCollision:!0,isDraggable:!0,isResizable:!0,children:s.map(d=>{const p=d.name.toLowerCase(),x=i[p],g=n[p]||A,N=d._isUserPane===!0;return g?e.jsx("div",{className:"bg-green-800/10",children:e.jsx(g,{name:d.name,status:d.status,logo:x,isUserPane:N})},p):(console.warn(`⚠️ Missing pane for service "${p}"`),null)})})})}function fe(){const[s,n]=a.useState(0),[i,r]=a.useState("random");return a.useEffect(()=>{const l=setTimeout(()=>r("clean"),3e3),t=setInterval(()=>{n(o=>o+1)},6e4);return()=>{clearTimeout(l),clearInterval(t)}},[]),e.jsx("div",{className:"text-green-500 text-sm mb-3",style:{whiteSpace:"pre"},children:["     ██╗   ██╗  █████╗  ██╗  ██████╗   ","     ██║   ██║ ██╔══██╗ ██║ ██╔═══██╗ ","     ██║   ██║ ███████║ ██║ ██║   ██║ ","     ╚██╗ ██╔╝ ██╔══██║ ██║ ██║   ██║ ","      ╚████╔╝  ██║  ██║ ██║ ╚██████╔╝  ","       ╚═══╝   ╚═╝  ╚═╝ ╚═╝  ╚═════╝   "].map((l,t)=>e.jsx("div",{className:"reverse-crt-line",style:{animationDelay:`${t*80}ms`},children:l.split("").map((o,c)=>{if(i==="random"&&s===0){const d=Math.random().toFixed(2),p=Math.random().toFixed(2),x=Math.random().toFixed(2),g=(Math.random()*.5).toFixed(2)+"s";return e.jsx("span",{className:"implode-char",style:{"--rand-x":d,"--rand-y":p,"--rand-rot":x,"--delay":g},children:o},c)}else return e.jsx("span",{className:"implode-char",children:o},c)})},t))},s)}const pe=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","let","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"]);function xe({onClose:s}){const[n,i]=a.useState(""),[r,l]=a.useState(""),[t,o]=a.useState(null),[c,d]=a.useState(!1),[p,x]=a.useState(""),[g,N]=a.useState(!1),[m,b]=a.useState([]);a.useEffect(()=>{fetch("http://localhost:1488/api/panes/registry").then(f=>f.json()).then(f=>b(Object.keys(f)))},[]);const u=f=>/^[a-zA-Z][a-zA-Z0-9_-]+$/.test(f)?pe.has(f.toLowerCase())?"Reserved JS keyword.":m.includes(f.toLowerCase())?"Pane already exists.":"":"Invalid name format.",h=async f=>{f.preventDefault();const w=u(n);if(w)return x(w);const v=new FormData;v.append("paneName",n),v.append("paneTitle",r),v.append("supervisor",c),t&&v.append("icon",t);try{const y=await fetch("/api/panes/create",{method:"POST",body:v}),E=await y.text();console.warn("[Raw Server Response]",E);let S;try{S=JSON.parse(E)}catch{throw new Error("Server returned invalid response.")}if(!y.ok||!S.success)throw new Error(S.error||"Unknown error");N(!0),window.dispatchEvent(new Event("paneRefresh")),setTimeout(()=>s(!0),1e3)}catch(y){x(y.message)}};return e.jsxs("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-black text-green-400 border border-green-700 p-6 rounded shadow-lg z-50 w-[400px]",children:[e.jsx("h2",{className:"text-lg font-bold mb-3",children:"[+] CREATE PANE"}),e.jsxs("form",{onSubmit:h,className:"space-y-2 text-xs",children:[e.jsx("input",{className:"bg-black border border-green-600 w-full px-2 py-1",placeholder:"Pane ID (e.g. docker)",value:n,onChange:f=>{i(f.target.value),x("")}}),e.jsx("input",{className:"bg-black border border-green-600 w-full px-2 py-1",placeholder:"Display Title (optional)",value:r,onChange:f=>l(f.target.value)}),e.jsx("input",{type:"file",accept:"image/*",className:"w-full text-green-300",onChange:f=>o(f.target.files[0])}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:()=>d(!c)}),e.jsx("span",{children:"Generate Supervisor conf.d"})]}),p&&e.jsx("div",{className:"text-red-500 text-xs mt-2",children:p}),g&&e.jsx("div",{className:"text-green-300 text-xs mt-2",children:"✓ Pane created. Reloading..."}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),children:"[CANCEL]"}),e.jsx("button",{type:"submit",children:"[CREATE]"})]})]})]})}function he({show:s,toggle:n}){const i=a.useRef(null),[r,l]=a.useState(290),t=typeof window<"u"&&window.innerWidth<768,o=t?"100vw":`${r}px`,[c,d]=a.useState(!1),p=m=>{const b=m.clientX;b>=240&&b<=window.innerWidth*.8&&i.current&&(i.current.style.width=`${b}px`)},x=m=>{const b=m.clientX;b>=240&&b<=window.innerWidth*.8&&l(b),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x)},g=()=>{document.addEventListener("mousemove",p),document.addEventListener("mouseup",x)},N=()=>{t&&n()};return e.jsxs("div",{id:"left-panel",ref:i,className:`
        fixed top-0 left-0 h-full bg-black border-r border-green-600 p-4 shadow-inner z-40
        transition-all duration-300 ease-in-out
        ${s?"translate-x-0":"-translate-x-full"}
      `,style:{width:o},children:[!t&&e.jsx("div",{className:"absolute top-0 right-0 h-full w-1 cursor-ew-resize z-50",onMouseDown:g}),e.jsx("div",{className:"hidden md:flex items-center justify-center absolute top-4 right-[-32px] bg-green-800 text-black text-xs font-bold px-2 py-1 rounded-r cursor-pointer shadow-lg z-50",onClick:n,children:"☰"}),!t&&e.jsx("div",{className:"text-green-400 text-sm cursor-pointer hover:text-green-200 absolute top-2 left-2",title:r>290?"Contract panel":"Expand to 1/3 screen",onClick:()=>{const m=Math.floor(window.innerWidth/3),b=290,u=r>b?b:m;l(u),i.current&&(i.current.style.width=`${u}px`)},children:r>290?"⇤":"⇥"}),e.jsx("div",{onDoubleClick:N,onTouchEnd:N,children:e.jsx(fe,{})}),e.jsx("div",{className:"text-green-400 text-xs border-b border-green-700 pb-2 mb-2",children:"▒▒ RAG SYSTEM PANEL ▒▒"}),e.jsxs("div",{className:"text-green-500 text-[10px] leading-tight",children:["- CPU: 03%",e.jsx("br",{}),"- GPU: 11%",e.jsx("br",{}),"- MEM: 28%",e.jsx("br",{}),"- ⚡ ALL SYSTEMS NOMINAL",e.jsx("br",{}),"- LAUNCH OPENWEBUI WINDOW",e.jsx("br",{}),"- LAUNCH COMFYUI WINDOW",e.jsx("br",{}),"- LAUNCH N8N WINDOW",e.jsx("br",{}),"- LAUNCH QDRANT WINDOW"]}),e.jsx("div",{className:"text-green-400 text-xs mt-4 border-t border-green-700 pt-2 cursor-pointer",onClick:()=>d(!0),children:"[+] PANE"}),c&&e.jsx(ee,{handle:".pane-drag-header",defaultPosition:{x:600,y:120},children:e.jsxs("div",{className:"fixed z-[999] bg-black border border-green-600 shadow-xl rounded-lg w-[500px]",children:[e.jsxs("div",{className:"pane-drag-header cursor-move bg-green-800 text-black text-xs px-3 py-2 border-b border-green-600 rounded-t",children:["[+] PANE",e.jsx("span",{className:"float-right text-green-300 hover:text-green-100 cursor-pointer",onClick:()=>d(!1),children:"✕"})]}),e.jsx("div",{className:"p-4",children:e.jsx(xe,{onClose:m=>{d(!1),m&&window.dispatchEvent(new Event("paneRefresh"))}})})]})})]})}function me({show:s,toggle:n,onReset:i}){const r=a.useRef(null),[l,t]=a.useState(300),[o,c]=a.useState(""),d=typeof window<"u"&&window.innerWidth<768,p=d?"100vw":`${l}px`;a.useEffect(()=>{const u=L();return u.on("dashboardLogStream",h=>{c(f=>f+h)}),()=>u.disconnect()},[]);const x=()=>{d&&n()},g=async()=>{c("");const h=(await fetch("http://localhost:1488/run-soft-reset")).body.getReader(),f=new TextDecoder;for(;;){const{done:w,value:v}=await h.read();if(w)break;c(y=>y+f.decode(v,{stream:!0}))}},N=u=>{const h=window.innerWidth-u.clientX;h>=240&&h<=window.innerWidth*.8&&r.current&&(r.current.style.width=`${h}px`)},m=u=>{const h=window.innerWidth-u.clientX;h>=240&&h<=window.innerWidth*.8&&t(h),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",m)},b=()=>{document.addEventListener("mousemove",N),document.addEventListener("mouseup",m)};return e.jsxs("div",{id:"right-panel",ref:r,className:`
        fixed top-0 right-0 h-full bg-black border-l border-green-600 p-4 shadow-inner z-40
        transition-all duration-300 ease-in-out
        ${s?"translate-x-0":"translate-x-full"}
      `,style:{width:p},children:[!d&&e.jsx("div",{className:"absolute top-0 left-0 h-full w-1 cursor-ew-resize z-50",onMouseDown:b}),e.jsx("div",{className:"hidden md:flex items-center justify-center absolute top-4 left-[-32px] bg-green-800 text-black text-xs font-bold px-2 py-1 rounded-l cursor-pointer shadow-lg z-50",onClick:n,children:"☰"}),!d&&e.jsx("div",{className:"text-green-400 text-sm cursor-pointer hover:text-green-200 absolute top-2 right-2",title:l>300?"Contract panel":"Expand to 1/3 screen",onClick:()=>{const u=Math.floor(window.innerWidth/3),h=300,f=l>h?h:u;t(f),r.current&&(r.current.style.width=`${f}px`)},children:l>300?"⇤":"⇥"}),e.jsx("div",{onDoubleClick:x,onTouchEnd:x,children:e.jsx("div",{className:"text-green-400 text-xs border-b border-green-700 pb-2 mb-2",children:"▒▒ DASHBOARD CONTROL PANEL ▒▒"})}),e.jsxs("div",{className:"flex flex-col space-y-2 text-xs text-green-300",children:[e.jsx("button",{onClick:g,className:"border border-green-500 px-2 py-1",children:"☢ RESET DASH SERVER"}),e.jsx("button",{onClick:i,className:"border border-green-500 px-2 py-1",children:"⊞ RESET LAYOUT"}),e.jsxs("div",{className:"text-green-500 text-[10px] leading-tight pt-2 border-t border-green-700 mt-2",children:["- ADMIN LOG: ACTIVE",e.jsx("br",{}),"- Boot FX: READY",e.jsx("br",{}),"- CRT: ACTIVE",e.jsx("br",{}),"- TERMINAL: ACTIVE"]}),e.jsx("div",{className:"mt-2 text-green-200 bg-black border border-green-700 p-2 h-40 overflow-y-auto scroll-panel text-[10px] leading-tight font-mono whitespace-pre-wrap shadow-inner",dangerouslySetInnerHTML:{__html:o||"░░░ Awaiting output ░░░"}}),e.jsx("div",{className:"mt-4 w-full overflow-hidden border border-green-700",children:e.jsx(z,{})})]})]})}const ge=({isActive:s})=>s?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-6",children:[e.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none scanlines boot-glow flash-flicker",style:{backgroundColor:"rgba(255, 0, 0, 0.1)"}}),e.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none scan-pulse"})]}):null,be="modulepreload",we=function(s,n){return new URL(s,n).href},$={},ve=function(n,i,r){let l=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));l=Promise.allSettled(i.map(p=>{if(p=we(p,r),p in $)return;$[p]=!0;const x=p.endsWith(".css"),g=x?'[rel="stylesheet"]':"";if(!!r)for(let b=o.length-1;b>=0;b--){const u=o[b];if(u.href===p&&(!x||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${g}`))return;const m=document.createElement("link");if(m.rel=x?"stylesheet":be,x||(m.as="script"),m.crossOrigin="",m.href=p,d&&m.setAttribute("nonce",d),document.head.appendChild(m),x)return new Promise((b,u)=>{m.addEventListener("load",b),m.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${p}`)))})}))}function t(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return l.then(o=>{for(const c of o||[])c.status==="rejected"&&t(c.reason);return n().catch(t)})},je=async()=>{const s={};try{const n=await fetch("/api/panes/listUserPanes"),{panes:i}=await n.json();for(const r of i){const l=r.replace("Pane.jsx","").toLowerCase(),t=await ve(()=>import(`../components/user/${r}`),[],import.meta.url);s[l]=t.default}}catch(n){console.error("[loadUserPanes] Failed to load user panes:",n)}return s},ye={supervisor:ne,postgres:M,postgresql:M,qdrant_dashboard:re,openwebui:W,openwebui_backend:W,ollama:oe,comfyui:ae,qdrant:le,n8n:ie,nvidia:ce},Ne={postgres:"https://www.postgresql.org/media/img/about/press/elephant.png",postgresql:"https://www.postgresql.org/media/img/about/press/elephant.png",qdrant_dashboard:"https://qdrant.tech/img/qdrant-logo.svg",openwebui:"https://docs.openwebui.com/images/logo.png",openwebui_backend:"https://docs.openwebui.com/images/logo.png",ollama:"https://ollama.com/public/ollama.png",qdrant:"https://qdrant.tech/img/qdrant-logo.svg",comfyui:null,n8n:null,nvidia:"https://logospng.org/download/nvidia/nvidia-256.png",supervisor:null},F=L("http://localhost:1488"),T="vaio_layout";function Se(){const[s,n]=a.useState([]),[i,r]=a.useState([]),[l,t]=a.useState({}),[o,c]=a.useState({}),[d,p]=a.useState(!0),[x,g]=a.useState(!0),N=u=>{if(localStorage.getItem(T))try{const h=JSON.parse(localStorage.getItem(T));r(h)}catch(h){console.error("🛑 Layout parsing error:",h),localStorage.removeItem(T)}else{const f=u.map((w,v)=>{const y=w.name.toLowerCase(),E=y==="supervisor",S=y==="nvidia";return{i:w.name,x:E?0:(v-1)%8,y:E?0:Math.floor((v-1)/8)+1,w:E?8:S?2:1,h:2,static:!1}});r(f),localStorage.setItem(T,JSON.stringify(f))}};a.useEffect(()=>(F.on("statusUpdate",async u=>{const h=u.map(f=>{let w=f.name.toLowerCase();return w==="openwebui_backend"&&(w="openwebui"),w==="postgres"&&(w="postgresql"),{...f,name:w}});try{const w=await(await fetch("http://localhost:1488/api/panes/registry")).json(),v=[];for(const[E,S]of Object.entries(w)){const j=E.toLowerCase();!h.some(P=>P.name===j)&&S.isUserPane===!0&&(v.push({name:j,status:"RUNNING",_isUserPane:!0}),console.log(`🧩 Marking ${j} as user pane`))}const y=[{name:"supervisor",status:"RUNNING"},{name:"nvidia",status:"RUNNING"},...v,...h];n(y),N(y)}catch(f){console.error("[ServiceMatrix] Failed to inject user panes:",f)}}),()=>F.off("statusUpdate")),[]),a.useEffect(()=>{const u=async()=>{try{const f=await(await fetch("http://localhost:1488/api/panes/registry")).json(),w={},v={},y=await je();for(const[E,S]of Object.entries(f)){const j=E.toLowerCase(),k=S.component.replace(".jsx","").toLowerCase();try{const P=y[k]||A;S.isUserPane===!0&&Object.defineProperty(P,"_isUserPane",{value:!0,writable:!1,configurable:!0,enumerable:!1}),w[j]=P,v[j]=S.icon||""}catch(P){console.warn(`⚠️ Could not load user pane: ${j}`,P),w[j]=A,v[j]=S.icon||""}}t({...ye,...w}),c({...Ne,...v})}catch(h){console.error("[paneRefresh] Error loading registry:",h)}};return u(),window.addEventListener("paneRefresh",u),()=>window.removeEventListener("paneRefresh",u)},[]);const m=u=>{r(u),localStorage.setItem(T,JSON.stringify(u))},b=()=>{localStorage.removeItem(T),location.reload()};return e.jsxs("div",{className:`w-screen h-screen flex flex-col bg-black text-green-300 font-mono ${s.length===0?"boot-glow":""}`,children:[e.jsx("div",{className:`fixed inset-0 z-50 pointer-events-none ${s.length===0?"scanlines":""}`}),e.jsxs("div",{className:"flex md:hidden justify-between px-4 py-2 bg-black border-b border-green-600",children:[e.jsx("button",{onClick:()=>p(!d),className:"text-green-400 text-xs border px-2 py-1",children:"☰ Menu"}),e.jsx("button",{onClick:()=>g(!x),className:"text-green-400 text-xs border px-2 py-1",children:"☰ Panel"})]}),e.jsxs("div",{className:"flex flex-1 h-0",children:[e.jsx(he,{show:d,toggle:()=>p(!d)}),e.jsx("div",{className:"flex-1 h-full overflow-y-auto p-4 scroll-panel",children:s.length===0?e.jsxs(e.Fragment,{children:[e.jsx(ge,{isActive:!0}),e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("div",{className:"terminal-error error-glow animate-scanlines",children:"!!SUPERVISOR SOCKET NOT DETECTED!!"})})]}):e.jsx(ue,{layout:i,onLayoutChange:m,services:s,paneMap:l,logoUrls:o})}),e.jsx(me,{show:x,toggle:()=>g(!x),onReset:b})]})]})}const _=["[OK] Initializing terminal interfaces...","[OK] Loading supervisor service...","[OK] Spawning OpenWebUI backend...","[OK] Mounting ComfyUI pipeline...","[OK] Qdrant vector engine online...","[OK] Engaging n8n automations...","[OK] Terminal bridge established","[OK] Socket connection stable","[OK] Boot sequence complete"];function Ee({onComplete:s}){const[n,i]=a.useState(0),[r,l]=a.useState(!1),[t,o]=a.useState(!1),[c,d]=a.useState(!1),[p,x]=a.useState(!1),[g,N]=a.useState(!1),[m,b]=a.useState(!1),[u,h]=a.useState(!1),[f,w]=a.useState(!1),[v,y]=a.useState(!1),[E,S]=a.useState(!1);return a.useEffect(()=>{const j=L();return j.on("connect",()=>{l(!0);const k=new Audio("https://www.101soundboards.com/sounds/12905733-riddles-of-the-grid-grid-grid");k.volume=1,k.play().catch(()=>console.warn("Autoplay blocked.")),o(!1),setTimeout(()=>o(!0),200)}),()=>j.disconnect()},[]),a.useEffect(()=>{if(!(!r||!t))if(n<_.length){const j=setTimeout(()=>i(n+1),120);return()=>clearTimeout(j)}else d(!0),N(!0),setTimeout(()=>b(!0),1e3),setTimeout(()=>h(!0),2e3),setTimeout(()=>w(!0),3e3),setTimeout(()=>{x(!0),y(!0),setTimeout(()=>y(!1),400)},4e3),setTimeout(()=>{x(!1),S(!0)},5e3),setTimeout(s,6500)},[n,r,t]),e.jsxs("div",{className:`fixed inset-0 text-green-400 font-mono text-sm z-50 flex flex-col items-center justify-center p-6 boot-glow ${t?"":"flash-flicker"}`,children:[e.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none scanlines"}),v&&e.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none scan-pulse"}),!c&&e.jsx("div",{className:"w-full max-w-xl min-h-64 z-40 bg-black p-4 border border-green-700 shadow-inner animate-flicker",children:_.slice(0,n).map((j,k)=>e.jsx("div",{className:"tracking-wider typing-line",style:{animationDelay:`${k*150}ms`},children:j},k))}),c&&e.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${f?"reverse-flash":""} z-40`,children:e.jsx("pre",{className:`text-center text-green-400 text-base tracking-widest 
    ${g?"glow-pulse":""} 
    ${m?"burn-in":""} 
    ${u?"glitch-flicker":""}`,children:["  ██╗   ██╗  █████╗  ██╗  ██████╗   "," ██║   ██║ ██╔══██╗ ██║ ██╔═══██╗ "," ██║   ██║ ███████║ ██║ ██║   ██║ "," ╚██╗ ██╔╝ ██╔══██║ ██║ ██║   ██║ ","   ╚████╔╝  ██║  ██║ ██║ ╚██████╔╝  ","    ╚═══╝   ╚═╝  ╚═╝ ╚═╝  ╚═════╝   "].map((j,k)=>e.jsx("div",{className:u?"crt-line":"",style:u?{animationDelay:`${k*100}ms`}:{},children:j.split("").map((P,G)=>e.jsx("span",{className:E?"explode-char":"",style:E?{transform:`translate(${Math.random()*600-300}px, ${Math.random()*600-300}px) rotate(${Math.random()*1440-720}deg) scale(${1+Math.random()*2.5})`,opacity:0,display:"inline-block",transition:"all 1s ease-out"}:{},children:P},G))},k))})})]})}const H={GENERAL:"",SUPERVISOR:"This is the Supervisor settings panel. Add buttons or tools here.",OPENWEBUI:"OpenWebUI config goes here.",OLLAMA:"Ollama service settings go here.",COMFYUI:"ComfyUI settings interface.",QDRANT:"Qdrant tuning and tools.",QDRANT_DASHBOARD:"Qdrant Dashboard UI settings.",N8N:"n8n automation options.",POSTGRES:"Postgres tuning or backup features."},ke=Object.keys(H);function Re(){const{visible:s,pane:n,close:i}=a.useContext(U),[r,l]=a.useState("GENERAL");return!s||!n?null:e.jsxs("div",{className:"fixed top-1/2 left-1/2 w-[600px] h-[400px] bg-black overflow-hidden border border-green-700 shadow-xl z-[999] rounded-xl transform -translate-x-1/2 -translate-y-1/2 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-green-900 text-green-300 text-sm font-bold border-b border-green-700",children:[e.jsxs("span",{children:[n.toUpperCase()," SETTINGS"]}),e.jsx("button",{onClick:i,className:"text-green-400 hover:text-green-200",children:"✖"})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-40 border-r border-green-800 p-2 text-xs space-y-1",children:ke.map(t=>e.jsx("button",{onClick:()=>l(t),className:`w-full text-left px-2 py-1 rounded hover:bg-green-800 ${r===t?"bg-green-800 text-green-200 font-bold":"text-green-300"}`,children:t},t))}),e.jsxs("div",{className:"flex-1 p-4 text-xs text-green-300 overflow-auto",children:[r==="SUPERVISOR"&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-400 font-bold",children:"Reread & Update Supervisor "}),e.jsx("button",{className:"text-black bg-green-400 hover:bg-green-300 text-xs font-bold px-2 py-1 rounded",onClick:async()=>{try{const t=await fetch("http://localhost:1488/run-command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cmd:"supervisorctl reread && supervisorctl update &&"})}),o=await t.text();console.log("[RUN Response]",o),t.ok?alert("RUN executed successfully."):alert(`RUR failed: ${t.status}`)}catch(t){console.error("RUN error:",t),alert("Failed to execute RUN.")}},children:"RUN"})]}),r!=="SUPERVISOR"&&e.jsx("div",{children:H[r]})]})]})]})}console.log("App.jsx loaded");function Ce(){const[s,n]=a.useState(!1);return e.jsx(se,{children:s?e.jsxs(e.Fragment,{children:[e.jsx(Se,{}),e.jsx(Re,{})," "]}):e.jsx(Ee,{onComplete:()=>n(!0)})})}te(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Ce,{})}));
